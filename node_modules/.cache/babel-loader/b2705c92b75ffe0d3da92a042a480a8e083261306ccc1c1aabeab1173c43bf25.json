{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = exports.Service = exports.Bonjour = void 0;\nconst registry_1 = __importDefault(require(\"./lib/registry\"));\nconst mdns_server_1 = __importDefault(require(\"./lib/mdns-server\"));\nconst browser_1 = __importDefault(require(\"./lib/browser\"));\nexports.Browser = browser_1.default;\nconst service_1 = __importDefault(require(\"./lib/service\"));\nexports.Service = service_1.default;\nclass Bonjour {\n  constructor(opts, errorCallback) {\n    this.server = new mdns_server_1.default(opts, errorCallback);\n    this.registry = new registry_1.default(this.server);\n  }\n  publish(opts) {\n    return this.registry.publish(opts);\n  }\n  unpublishAll(callback) {\n    return this.registry.unpublishAll(callback);\n  }\n  find(opts = undefined, onup) {\n    return new browser_1.default(this.server.mdns, opts, onup);\n  }\n  findOne(opts = undefined, timeout = 10000, callback) {\n    const browser = new browser_1.default(this.server.mdns, opts);\n    var timer;\n    browser.once('up', service => {\n      if (timer !== undefined) clearTimeout(timer);\n      browser.stop();\n      if (callback) callback(service);\n    });\n    timer = setTimeout(() => {\n      browser.stop();\n      if (callback) callback(null);\n    }, timeout);\n    return browser;\n  }\n  destroy() {\n    this.registry.destroy();\n    this.server.mdns.destroy();\n  }\n}\nexports.Bonjour = Bonjour;\nexports.default = Bonjour;","map":{"version":3,"names":["registry_1","__importDefault","require","mdns_server_1","browser_1","exports","Browser","default","service_1","Service","Bonjour","constructor","opts","errorCallback","server","registry","publish","unpublishAll","callback","find","undefined","onup","mdns","findOne","timeout","browser","timer","once","service","clearTimeout","stop","setTimeout","destroy"],"sources":["../src/index.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AACA,MAAAA,UAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,aAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAH,eAAA,CAAAC,OAAA;AA8EiDG,OAAA,CAAAC,OAAA,GA9E1CF,SAAA,CAAAG,OAAO;AACd,MAAAC,SAAA,GAAAP,eAAA,CAAAC,OAAA;AA6ESG,OAAA,CAAAI,OAAA,GA7EFD,SAAA,CAAAD,OAAO;AAEd,MAAaG,OAAO;EAUhBC,YAAYC,IAAgC,EAAEC,aAAoC;IAC9E,IAAI,CAACC,MAAM,GAAO,IAAIX,aAAA,CAAAI,OAAM,CAACK,IAAI,EAAEC,aAAa,CAAC;IACjD,IAAI,CAACE,QAAQ,GAAK,IAAIf,UAAA,CAAAO,OAAQ,CAAC,IAAI,CAACO,MAAM,CAAC;EAC/C;EAOOE,OAAOA,CAACJ,IAAmB;IAC9B,OAAO,IAAI,CAACG,QAAQ,CAACC,OAAO,CAACJ,IAAI,CAAC;EACtC;EAOOK,YAAYA,CAACC,QAAuC;IACvD,OAAO,IAAI,CAACH,QAAQ,CAACE,YAAY,CAACC,QAAQ,CAAC;EAC/C;EAQOC,IAAIA,CAACP,IAAA,GAAkCQ,SAAS,EAAEC,IAAiC;IACtF,OAAO,IAAIjB,SAAA,CAAAG,OAAO,CAAC,IAAI,CAACO,MAAM,CAACQ,IAAI,EAAEV,IAAI,EAAES,IAAI,CAAC;EACpD;EASOE,OAAOA,CAACX,IAAA,GAAkCQ,SAAS,EAAEI,OAAO,GAAG,KAAK,EAAEN,QAA2B;IACpG,MAAMO,OAAO,GAAY,IAAIrB,SAAA,CAAAG,OAAO,CAAC,IAAI,CAACO,MAAM,CAACQ,IAAI,EAAEV,IAAI,CAAC;IAC5D,IAAIc,KAAU;IACdD,OAAO,CAACE,IAAI,CAAC,IAAI,EAAGC,OAAgB,IAAI;MACpC,IAAGF,KAAK,KAAKN,SAAS,EAAES,YAAY,CAACH,KAAK,CAAC;MAC3CD,OAAO,CAACK,IAAI,EAAE;MACd,IAAGZ,QAAQ,EAAEA,QAAQ,CAACU,OAAO,CAAC;IAClC,CAAC,CAAC;IACFF,KAAK,GAAGK,UAAU,CAAC,MAAK;MACpBN,OAAO,CAACK,IAAI,EAAE;MACd,IAAGZ,QAAQ,EAAEA,QAAQ,CAAC,IAAI,CAAC;IAC/B,CAAC,EAAEM,OAAO,CAAC;IACX,OAAOC,OAAO;EAClB;EAKOO,OAAOA,CAAA;IACV,IAAI,CAACjB,QAAQ,CAACiB,OAAO,EAAE;IACvB,IAAI,CAAClB,MAAM,CAACQ,IAAI,CAACU,OAAO,EAAE;EAC9B;;AAvEJ3B,OAAA,CAAAK,OAAA,GAAAA,OAAA;AA6EAL,OAAA,CAAAE,OAAA,GAAeG,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}